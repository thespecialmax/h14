/*
Plugin: simpleParallax
Version 1.0
Author: Fran√ßois Barrailla
Twitter: @fransbar
Author URL: http://francoisbarrailla.com
Plugin URL: http://francoisbarrailla.com/resources/simpleparallax
license: http://www.wtfpl.net
*/
!function(t){function i(i,o){t("<img />").on("load",function(){o(this.width,this.height)}).attr("src",i).error(function(){throw"$.simpleParallax : fail to load the image "+i})}function o(t){var i=t.offset().top-a+t.height()<0,o=t.offset().top>n+a;return!i&&!o}function r(t,i,r){if(o(t)){var e,s=t.width(),l=t.height();if("cover"===t.css("background-size")){var h=s/i.width;e=i.height*h}else e=i.height;var c=l+t.offset().top-a,d=(n+l-c)/(n+l),f=e-l,u="down"===r?f*d+l-e:-(f*d);t.css("background-position","50% "+u+"px")}}var e=t(window),n=e.height(),a=e.scrollTop();e.on("resize",function(){n=e.height(),a=e.scrollTop()}),e.on("scroll",function(){a=e.scrollTop()}),t.fn.simpleParallax=function(o){var o=t.extend(t.fn.simpleParallax.defaults,o);return this.each(function(){try{var n,a=t(this),s=t.extend({},o,a.data());if("up"!==s.dir&&"down"!==s.dir)throw'wrong direction (dir) option setted (must be "up" or "down")';if(a.data("bgi"))n=a.data("bgi"),a.css("backgroundImage","url("+a.data("bgi")+")");else{var l=a.css("background-image").match(/^url\("?(.+?)"?\)$/);if(!l||l.length<1)throw"impossible to extract background-image of element "+this.toString();n=l[1]}i(n,function(t,i){e.on("scroll",function(){r(a,{width:t,height:i},s.dir)}),r(a,{width:t,height:i},s.dir)})}catch(h){console.error("$.simpleParallax : "+h)}})},t.fn.simpleParallax.defaults={dir:"down"}}(jQuery);